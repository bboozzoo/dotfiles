(add-to-list 'load-path "~/.emacs.d/plugins/") ; add custom dir to load path

; settings start here
(setq inhibit-startup-screen t)     ;disable startup screen
;(setq initial-buffer-choice t)      ;show scratch buffer
(defun setup-fonts ()
  (set-face-attribute 'default nil :height 100) ;default font size
  (set-face-font 'default "-misc-fixed-medium-r-semicondensed-*-13-*-75-75-c-60-*-*") ;fixed as in xterm
  )
; setting font makes sense if running under X
(if window-system
    (setup-fonts)
  )
(require 'font-lock)                ;syntax on
(global-font-lock-mode t)           ;enable syntax coloring
(setq font-lock-verbose nil)        ;no messages
(setq query-replace-highlight t)    ;highlight query
(setq search-highlight t)           ;highlight incremental search
(show-paren-mode t)                 ;show matching parentheses
(setq blink-matching-paren-distance nil) ;search for open-paren till point-min
(delete-selection-mode t)           ;deleting region by typing or del (like Win)
(setq transient-mark-mode t)        ;show selected region
;(global-hl-line-mode 1)             ;highlight current line
(global-linum-mode t)               ;show line numbers
(line-number-mode t)                ;show line number in status bar
(column-number-mode t)              ;show column number in status bar
(require 'tramp)                    ;enable TRAMP (edit through network)
(setq tramp-default-method "ssh")   ;TRAMP use ssh
(tool-bar-mode nil)                 ;disable toolbar
;(global-set-key "C-Z" nil)          ;disable ctrl + z background mode

; javascript mode
(add-to-list 'auto-mode-alist '("\\.js\\'" . javascript-mode)) ;add default mode for *.js files
(autoload 'javascript-mode "javascript" nil t) ; load javascript when javascipt-mode is needed

;indentation
;general
(setq-default indent-tabs-mode nil) ;use spaces instead of tabs
(setq default-tab-width 4)

;C
(setq c-default-style "linux"
      c-basic-offset 4)

; color themes
(require 'color-theme)              ;color theme
(defun set-color-theme (f)
  (if (not (fboundp f))
      (color-theme-initialize))
  (funcall f)
)
; try to set color-theme-tty dark, initialize if needed
(set-color-theme 'color-theme-tty-dark)   


; cscope
(require 'xcscope)                  ;enable xcscope

;IDO
(require 'ido)
(ido-mode t)
(setq ido-enable-flex-matching t)

;yasnippet
(add-to-list 'load-path "~/.emacs.d/plugins/yasnippet")
(require 'yasnippet)
(yas/initialize)
(yas/load-directory "~/.emacs.d/plugins/yasnippet/snippets")

;compilation window
(setq compilation-window-height 8)  ;compilation window to be smaller
(setq compilation-finish-function   ;compilation window will disappear
      (lambda (buf str)
        (if (string-match "exited abnormally" str)
            ;;there were errors
            (message "compilation errors, press C-x ` to visit")
          ;;no errors, make the compilation window go away in 0.5 seconds
          (run-at-time 0.5 nil 'delete-windows-on buf)
          (message "NO COMPILATION ERRORS!"))))

;recentf - recent files
(require 'recentf)
(recentf-mode 1)
(setq recentf-max-saved-items 500)
(setq recentf-max-menu-items 60)
(global-set-key [(meta f12)] 'recentf-open-files)

;jump to matching parenthesis
(global-set-key (kbd "C-5") 'match-paren)
(defun match-paren (arg)
  "Go to the matching paren if on a paren;"
  (interactive "p")
  (cond ((looking-at "\\s\(") (forward-list 1) (backward-char 1))
        ((looking-at "\\s\)") (forward-char 1) (backward-list 1))
        )
  )

;jumplist
(require 'jumplist)
(global-set-key (kbd "C-o") 'jl-jump-backward)
(global-set-key (kbd "C-i") 'jl-jump-forward)

